{% extends 'base.html' %}

{% block title %}{{ competition }} &ndash; Odovzdaj{% endblock %}

{% block content %}
<form action="{% url 'competition:submit' competition.pk %}" method="POST">
    {% csrf_token %}

    {% for error in form.non_field_errors %}
    <div class="alert alert-dismissible alert-danger">
        {{ error }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}

    {% for field in form %}
    {% for error in field.errors %}
    <div class="alert alert-dismissible alert-danger">
        {{ error }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}
    {% endfor %}

    {{ form.competition }}

    <div class="form-group">
    <div class="row">
        <div class="col">
            <label for="id_winner">Víťaz</label>
        </div>
        <div class="col">
            <label for="id_loser">Porazený</label>
        </div>
    </div>
    <div class="row">
        <div class="col">
            {{ form.winner }}
        </div>
        <div class="col">
            {{ form.loser }}
        </div>
    </div>
    </div>

    <div class="form-group">
        <input type="submit" value="Odovzdaj" class="form-control btn-primary" />
    </div>
</form>

{% if history %}
<div class="list-group">
  {% for match in history %}
  <a class="list-group-item list-group-item-action" target="_blank" href="{% url 'admin:competition_match_change' match.pk %}">
    <strong>Víťaz:</strong> {{ match.winner }} | <strong>Porazený:</strong> {{ match.loser }}
    <span class="float-right">{{ match.time|date:"H:i:s (d. m. Y)" }}</span>
  </a>
  {% endfor %}
</div>
{% endif %}
{% endblock %}
